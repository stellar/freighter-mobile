appId: org.stellar.freighterdev
tags:
  - onboarding
  - create-wallet
---
- launchApp:
    clearState: true
    clearKeychain: true

# Wait for welcome screen
- assertVisible:
    id: welcome-screen

# Tap create wallet button
- tapOn:
    id: create-wallet-button

# Enter password on Choose Password screen
- assertVisible:
    id: password-input
- tapOn:
    id: password-input
- inputText: "TestPassword123!"

# Tap continue button
- tapOn:
    id: default-action-button

# Confirm password screen
- assertVisible:
    id: confirm-password-input
- tapOn:
    id: confirm-password-input
- inputText: "TestPassword123!"

# Tap continue button
- tapOn:
    id: default-action-button

# Recovery phrase alert screen - tap continue
- tapOn:
    id: default-action-button

# Recovery phrase screen - verify it's visible and continue
- assertVisible:
    id: recovery-phrase-container
- tapOn:
    id: continue-button

# Validate recovery phrase - select 3 words (round-based validation)
# Note: This is a simplified flow. The actual validation requires selecting
# the correct word from a grid for 3 rounds. For now, we'll tap on word bubbles
# - this may need refinement based on actual word selection logic
- extendedWaitUntil:
    visible:
      text: .*word.*
    timeout: 10000
# Select first word (tap on first available word bubble)
- tapOn:
    point: "30%,50%"
- tapOn:
    id: default-action-button
# Select second word
- tapOn:
    point: "50%,50%"
- tapOn:
    id: default-action-button
# Select third word
- tapOn:
    point: "70%,50%"
- tapOn:
    id: default-action-button

# Biometrics screen - enable biometrics (if available)
- runFlow:
    when:
      visible:
        text: .*biometric.*|.*Face ID.*|.*Touch ID.*|.*Enable.*
    commands:
      - tapOn:
          id: default-action-button
      # Handle system biometric prompt if it appears
      - runFlow:
          when:
            visible:
              text: .*Use.*|.*Face ID.*|.*Touch ID.*
          commands:
            - tapOn:
                text: ".*Use.*|.*Face ID.*|.*Touch ID.*"

# Verify we reached home screen
- extendedWaitUntil:
    visible:
      id: home-screen
    timeout: 30000
