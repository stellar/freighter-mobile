appId: org.stellar.freighterdev
tags:
  - onboarding
  - create-wallet
---
# Launch app and wait for welcome screen; retry up to 3 times (2 min wait each) if not visible
- retry:
    maxRetries: 2
    commands:
      - launchApp:
          clearState: true
          clearKeychain: true
      - extendedWaitUntil:
          visible:
            id: welcome-screen
          timeout: 120000 # 2 minutes

# Tap create wallet button
- tapOn:
    id: create-wallet-button

# Enter password on Choose Password screen
- assertVisible:
    id: password-input
- tapOn:
    id: password-input
- inputText: "TestPassword123!"
- hideKeyboard

# Tap continue button
- tapOn:
    id: default-action-button

# Confirm password screen
- assertVisible:
    id: confirm-password-input
- tapOn:
    id: confirm-password-input
- inputText: "TestPassword123!"
- hideKeyboard

# Tap continue button
- tapOn:
    id: default-action-button

# Recovery phrase alert screen - tap continue
- tapOn:
    id: default-action-button

# Recovery phrase screen - verify it's visible and skip validation
- assertVisible:
    id: recovery-phrase-container
- tapOn:
    id: skip-button
# Confirm skip in the bottom sheet modal
- tapOn:
    id: skip-confirm-button

# Wait for wallet creation to complete - check for home screen or welcome banner
- extendedWaitUntil:
    visible:
      id: home-screen|welcome-banner-dismiss-button
    timeout: 10000

# Dismiss welcome banner if it appears after wallet creation
- runFlow:
    when:
      visible:
        id: welcome-banner-dismiss-button
    commands:
      - tapOn:
          id: welcome-banner-dismiss-button
      - extendedWaitUntil:
          visible:
            id: home-screen
          timeout: 10000
